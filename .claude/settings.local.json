{
  "permissions": {
    "allow": [
      "Bash(npm run build:*)",
      "WebFetch(domain:localhost)",
      "Bash(npx playwright:*)",
      "Bash(npm install:*)",
      "Bash(node /tmp/check-console.mjs:*)",
      "Bash(curl:*)",
      "Bash(node:*)",
      "Bash(chmod:*)",
      "Bash(python -m pytest:*)",
      "Bash(python:*)",
      "Bash(python3:*)",
      "Bash(__NEW_LINE_be10b67347cece10__ echo \"\")",
      "Bash(# Find the right database name and credentials cat /home/nikolay/projects/track-your-regions/.env || cat /home/nikolay/projects/track-your-regions/docker-compose.yml)",
      "Bash(PGPASSWORD=postgres psql:*)",
      "Bash(find:*)",
      "Bash(npx tsc --noEmit)",
      "Bash(docker ps:*)",
      "Bash(ls:*)",
      "Bash(docker exec:*)",
      "Bash(docker restart:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "Bash(git checkout:*)",
      "Bash(npm run:*)",
      "WebSearch",
      "WebFetch(domain:data.unesco.org)",
      "Bash(psql:*)",
      "Bash(docker logs:*)",
      "Bash(xargs:*)",
      "Bash(pkill:*)",
      "Bash(awk:*)",
      "Bash(npx tsc --version)",
      "Bash(lsof:*)",
      "Bash(docker-compose ps:*)",
      "Bash(docker compose build:*)",
      "Bash(docker compose:*)",
      "WebFetch(domain:query.wikidata.org)",
      "Bash(git stash:*)",
      "Bash(# Check if UNESCO file API supports resize parameters URL=\"\"https://data.unesco.org/api/explore/v2.1/catalog/datasets/whc001/files/2f2017c5203a1ea33cf4efe60cdf72cb\"\" # Try common resize params echo \"\"=== No param ===\"\" curl -sI \"\"$URL\"\")",
      "WebFetch(domain:help.opendatasoft.com)",
      "Bash(__NEW_LINE_c02e4c34afd1d98e__ echo \"=== /files/ID?thumbnail=true ===\")",
      "Bash(__NEW_LINE_e0d46d7de343de35__ echo \"=== /files/ID?resize=300 ===\")",
      "Bash(FILE_ID=\"2f2017c5203a1ea33cf4efe60cdf72cb\")",
      "Bash(BASE=\"https://data.unesco.org/api/explore/v2.1/catalog/datasets/whc001\")",
      "Bash(__NEW_LINE_d3759bab6132cfb2__ curl -sL \"$BASE/files/$FILE_ID?thumbnail=true\" -o /tmp/unesco-test/thumb2.jpg)",
      "Bash(__NEW_LINE_d3759bab6132cfb2__ wc -c /tmp/unesco-test/full.jpg /tmp/unesco-test/thumb2.jpg /tmp/unesco-test/resize300.jpg)",
      "Bash(identify:*)",
      "Bash(echo:*)",
      "Bash(grep:*)",
      "Bash(wc:*)",
      "Bash(npx eslint:*)",
      "Bash(npx tsc:*)",
      "Bash(npx --yes tsc:*)",
      "Bash(npx vite build:*)",
      "Bash(git -C /home/nikolay/projects/track-your-regions status)",
      "Bash(git -C /home/nikolay/projects/track-your-regions diff)",
      "Bash(git -C /home/nikolay/projects/track-your-regions add backend/src/index.ts db/init/01-schema.sql frontend/index.html frontend/src/App.tsx frontend/src/components/Header.tsx frontend/src/components/WorldViewEditor.tsx frontend/src/components/WorldViewEditor/EditorThemeContext.tsx frontend/src/components/WorldViewEditor/components/ActionStrip.tsx frontend/src/components/WorldViewEditor/components/DivisionSearchPanel.tsx frontend/src/components/WorldViewEditor/components/DraggableRegionItem.tsx frontend/src/components/WorldViewEditor/components/GeometryMapPanel.tsx frontend/src/components/WorldViewEditor/components/RegionTreePanel.tsx frontend/src/components/WorldViewEditor/components/RootDropZone.tsx frontend/src/components/WorldViewEditor/components/WorldViewHeader.tsx frontend/src/components/WorldViewEditor/theme.ts frontend/src/components/WorldViewEditor/types.ts frontend/src/hooks/useExperienceContext.tsx frontend/src/index.css frontend/src/utils/mapUtils.ts frontend/src/theme/)",
      "Bash(git -C /home/nikolay/projects/track-your-regions commit -m \"$\\(cat <<''EOF''\nUnify app theme, fix antimeridian focus, clean up sync logs, fix UNESCO images\n\n- Move editor-only theme to global AppThemeProvider with localStorage-persisted\n  dark/light mode, Figtree/Syne fonts, and teal palette across all components\n- Add dark/light toggle to Header \\(removed from WorldViewEditor\\)\n- Fix full-globe regions \\(Oceania\\) focus: derive bbox from children''s focus data\n  when geometry spans >350Â° longitude, preventing wrong map centering\n- Remove anchor_point from update_region_metadata trigger to prevent overwrite\n  of antimeridian-aware values from update_region_focus_data\n- Fix smartFitBounds to use pre-computed anchorPoint for antimeridian regions\n- Mark orphaned ''running'' sync logs as failed on server startup\n- Add data.unesco.org to trusted image domains for UNESCO thumbnails\n- Delete dead code: DraggableRegionItem, RootDropZone, old editor theme files\n\nCo-Authored-By: Claude Opus 4.6 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git -C /home/nikolay/projects/track-your-regions push)",
      "Bash(npm --prefix frontend run typecheck)",
      "Bash(npm --prefix backend run typecheck)",
      "mcp__plugin_playwright_playwright__browser_navigate",
      "mcp__plugin_playwright_playwright__browser_wait_for",
      "mcp__plugin_playwright_playwright__browser_take_screenshot",
      "mcp__plugin_playwright_playwright__browser_click",
      "mcp__plugin_playwright_playwright__browser_console_messages",
      "mcp__plugin_playwright_playwright__browser_evaluate",
      "mcp__plugin_playwright_playwright__browser_run_code",
      "mcp__plugin_playwright_playwright__browser_snapshot",
      "mcp__plugin_playwright_playwright__browser_hover",
      "WebFetch(domain:fonts.openmaptiles.org)",
      "WebFetch(domain:github.com)",
      "Bash(git reset:*)",
      "Bash(git mv:*)",
      "Bash(npm --prefix frontend run lint)",
      "Bash(git status:*)",
      "WebFetch(domain:semgrep.dev)",
      "Bash(semgrep --version:*)",
      "Bash(pip install:*)",
      "Bash(pipx install:*)",
      "Bash(pipx list:*)",
      "Bash(sudo dnf install:*)",
      "Bash(/home/nikolay/.local/share/semgrep-venv/bin/pip install semgrep)",
      "Bash(/home/nikolay/.local/share/semgrep-venv/bin/semgrep --version)",
      "Bash(PATH=\"/home/nikolay/.local/share/semgrep-venv/bin:$PATH\" /home/nikolay/.local/share/semgrep-venv/bin/semgrep:*)",
      "Bash(docker pull:*)",
      "Bash(docker run:*)",
      "Bash(npm ls:*)",
      "Bash(npm audit:*)"
    ]
  },
  "outputStyle": "Explanatory"
}
